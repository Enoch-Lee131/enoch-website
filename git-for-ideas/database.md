## How Git-for-Ideas Stores the Your Thought

*A look inside the architecture that turns writing into a living history.*
This article explains how the database captures that evolution.


---


# 1ï¸âƒ£ A Database Built for Meaning, Not Keystrokes


In Git-for-Ideas, the system pays attention to **semantic change**.
Instead of asking *"What did the user edit?"*, it asks **"Has the meaning shifted?"**


To answer this, the backend evaluates **four forms of drift** whenever you write:

- ğŸŒ **Global drift** â€” how the overall document meaning changes
- ğŸ“ **Local drift** â€” paragraph-level differences detected via embeddings
- ğŸ“Š **Cumulative drift** â€” small shifts adding up over time
- âš ï¸ **Contradiction drift** â€” reversals or breaks in earlier logic


Only when these signals cross a threshold does the system decide that the idea has moved in a meaningful way.


## Full Data Flow

```
User writes
    â”‚
    â–¼
Real-time drift detection
    â”‚
    â”œâ”€â”€ Drift < threshold
    â”‚        â”‚
    â”‚        â–¼
    â”‚   Update insights 
    â”‚
    â””â”€â”€ Drift â‰¥ threshold
             â”‚
             â–¼
        Create new version
             â”‚
             â–¼
        Compute diff
             â”‚
             â–¼
        Queue background job
             â”‚
             â–¼
      Generate AI narrative
```


---


# 2ï¸âƒ£ Projects: The Home of a Document's Lifecycle


A **project** represents a single document â€” a long-form essay, a chapter, a note, a planning doc.


It serves as the **container** for everything that evolves inside it:

- **versions**
- **branches**
- **diffs**
- **writing insights**
- **background jobs**
- **cached embeddings**


All activity in the system anchors to the project.


---


# 3ï¸âƒ£ Versions: Snapshots of Meaningful Change


**Versions** are the core of the architecture.
But unlike traditional editors, versions aren't created on every save or keystroke.


A version is created only when the **meaning** of your writing has drifted enough to matter.


## ğŸ“¦ Each version stores:

- The **full text** at that moment
- **Paragraph segmentation** and paragraph embeddings
- An automatically generated **short node title**
- The **parent version** it descended from
- The **branch** it belongs to (if any)
- A human-readable **"shift narrative"** generated by the AI


## Versions form a **tree**, not a flat list.

```
          (Root)
            V1
             â”‚
             â–¼
            V2
           /  \
         V3    V4
         â”‚      \
         â–¼       â–¼
        V5       V6
```


If you restore an older version and continue writing, the system interprets that as **returning to an earlier idea**.
A new branch forms at that point.


---


# 4ï¸âƒ£ How the System Decides a Version Should Exist


Here's the simplified lifecycle:

1. You **update new content**.
2. The system **computes drift signals** by comparing the new text to the previous version.
3. If the change is small,no version is created.
4. If the change is meaningful, a **new version is created automatically**.


This ensures your version history is filled only with **useful snapshots** rather than noisy micro-edits.


---


# 5ï¸âƒ£ Diffs: Understanding What Changed


When a new version is created, the system computes a **semantic diff** between:

**the parent version â†’ the new version**


## ğŸ” Each diff contains:

- A **similarity score**
- **Drift signals**
- A **drift category**
- An automatically generated **summary of what changed**


Diffs power the **evolution map**, showing how ideas shifted and why.


---


# 6ï¸âƒ£ Branches: A Tree of Exploration


In Git-for-Ideas, **branching** reflects your creative exploration.


## ğŸŒ¿ Branches form when:

- You **restore an older version**
- You **begin writing from that point**
- A new sequence of versions **grows from that restored node**


This mirrors a version control system:
thoughts diverge, explore an alternate direction, and form a **branch in the version tree**.


## Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚  workspaces  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   projects   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   versions    â”‚â”€â”€â”€â”€â”€â”€â”‚    diffs     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1:N  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


---


# 7ï¸âƒ£ Background Jobs: Handling AI Work


To keep the editor fast, the system sends these tasks to a **background job queue**.


## âš™ï¸ The job system ensures:

- âœ… Only **one active job per project**
- âœ… Duplicate jobs **collapse into the same output**
- âœ… Retries return the **original result**, not a new one


It guarantees **reliability** and **consistency**, even if a user pastes multiple times or the network hiccups.


---


# 8ï¸âƒ£ Caching: The Engine of Performance


Two caching layers make the experience fast:


## ğŸ—„ï¸ Embedding Cache

Stores **paragraph embeddings** keyed by hashed text.


## ğŸ’¡ Insight Cache

Stores **writing insights** mapped to content hashes.
This keeps **real-time writing feedback responsive** even in large documents.


Together, these caches **reduce cost and computation**.


---


# 9ï¸âƒ£ Idempotency: Clean Data Under All Conditions


Real users paste text twice.
Browsers retry requests.
Connections drop mid-write.


To handle this, Git-for-Ideas uses **two layers of idempotency**:

- ğŸ” **Job idempotency** prevents duplicate background tasks.
- ğŸ” **Version idempotency** ensures the same operation never creates two versions.


This preserves the integrity of your version graph â€” **one version for one meaningful change, always**.


---


# ğŸ”Ÿ The Database as a Mirror of Thinking


When you zoom out, the architecture **mirrors the way ideas unfold**:

- âœ… **Versions** capture moments where meaning changes.
- âœ… **Branches** reflect alternate paths of thought.
- âœ… **Diffs** explain how and why an idea shifted.
- âœ… **Caches** preserve momentum while writing.
- âœ… **Idempotency** keeps the graph clean and trustworthy.


It's a database designed not just to **store text**, but to store **the evolution of ideas** â€” faithfully, efficiently, and intelligibly.


Your writing becomes a **navigable history**.
Your thinking becomes a **Map**.
Your document becomes a **living system**.


---
